# PinShop æ‹¼å›¢ç§’æ€å°ç¨‹åº

åŸºäº Uni-app + Vue 3 + TypeScript å¼€å‘çš„å¾®ä¿¡å°ç¨‹åºæ‹¼å›¢ç§’æ€ç”µå•†åº”ç”¨ã€‚

## æŠ€æœ¯æ ˆ

- **æ¡†æ¶**: Uni-app (Vue 3 + Vite + TypeScript)
- **UI ç»„ä»¶**: è‡ªå®šä¹‰ç»„ä»¶ + uni-ui
- **çŠ¶æ€ç®¡ç†**: Pinia
- **ç½‘ç»œè¯·æ±‚**: luch-request
- **æ„å»ºå·¥å…·**: Vite

## åŠŸèƒ½ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½
- âœ… ç§’æ€æŠ¢è´­ï¼ˆé«˜å¹¶å‘ + è½®è¯¢æœºåˆ¶ï¼‰
- âœ… æ‹¼å›¢åŠŸèƒ½ï¼ˆå‘èµ·ã€å‚ä¸ã€æŸ¥çœ‹è¿›åº¦ï¼‰
- âœ… å•†å“æµè§ˆï¼ˆæœç´¢ã€åˆ†ç±»ã€è¯¦æƒ…ï¼‰
- âœ… è®¢å•ç®¡ç†ï¼ˆåˆ—è¡¨ã€è¯¦æƒ…ã€çŠ¶æ€è·Ÿè¸ªï¼‰
- âœ… æ”¯ä»˜é›†æˆï¼ˆå¾®ä¿¡æ”¯ä»˜ï¼‰
- âœ… åœ°å€ç®¡ç†ï¼ˆå¢åˆ æ”¹æŸ¥ã€é»˜è®¤åœ°å€ï¼‰
- âœ… è´­ç‰©è½¦ï¼ˆæ·»åŠ ã€åˆ é™¤ã€ç»“ç®—ï¼‰

### æŠ€æœ¯äº®ç‚¹
- ğŸš€ é«˜å¹¶å‘ç§’å‰Šå³°æ¶æ„ï¼ˆå¼‚æ­¥å¤„ç† + è½®è¯¢æŸ¥è¯¢ï¼‰
- â±ï¸ å®æ—¶å€’è®¡æ—¶ç»„ä»¶
- ğŸ“Š åº“å­˜è¿›åº¦æ¡å±•ç¤º
- ğŸ” JWT Token è®¤è¯
- ğŸ’¾ æœ¬åœ°è´­ç‰©è½¦æŒä¹…åŒ–

## é¡¹ç›®ç»“æ„

```
src/
â”œâ”€â”€ api/              # API æ¥å£
â”‚   â”œâ”€â”€ user.ts       # ç”¨æˆ·æ¥å£
â”‚   â”œâ”€â”€ product.ts    # å•†å“æ¥å£
â”‚   â”œâ”€â”€ order.ts      # è®¢å•æ¥å£
â”‚   â”œâ”€â”€ payment.ts    # æ”¯ä»˜æ¥å£
â”‚   â”œâ”€â”€ group.ts      # æ‹¼å›¢æ¥å£
â”‚   â””â”€â”€ admin.ts      # ç®¡ç†åå°æ¥å£
â”œâ”€â”€ components/       # å…¬å…±ç»„ä»¶
â”‚   â”œâ”€â”€ Countdown.vue     # å€’è®¡æ—¶ç»„ä»¶
â”‚   â”œâ”€â”€ ProgressBar.vue   # è¿›åº¦æ¡ç»„ä»¶
â”‚   â”œâ”€â”€ ProductCard.vue   # å•†å“å¡ç‰‡
â”‚   â””â”€â”€ SkuSelector.vue   # SKUé€‰æ‹©å™¨
â”œâ”€â”€ pages/            # é¡µé¢
â”‚   â”œâ”€â”€ index/        # é¦–é¡µï¼ˆç§’æ€åˆ—è¡¨ï¼‰
â”‚   â”œâ”€â”€ detail/       # å•†å“è¯¦æƒ…
â”‚   â”œâ”€â”€ order/        # è®¢å•ï¼ˆåˆ—è¡¨ã€è¯¦æƒ…ï¼‰
â”‚   â”œâ”€â”€ profile/      # ä¸ªäººä¸­å¿ƒ
â”‚   â”œâ”€â”€ address/      # åœ°å€ç®¡ç†
â”‚   â”œâ”€â”€ group/        # æ‹¼å›¢ï¼ˆåˆ—è¡¨ã€è¯¦æƒ…ï¼‰
â”‚   â”œâ”€â”€ cart/         # è´­ç‰©è½¦
â”‚   â””â”€â”€ search/       # æœç´¢
â”œâ”€â”€ stores/           # Pinia çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ user.ts       # ç”¨æˆ·çŠ¶æ€
â”‚   â””â”€â”€ cart.ts       # è´­ç‰©è½¦çŠ¶æ€
â”œâ”€â”€ styles/           # å…¨å±€æ ·å¼
â”‚   â””â”€â”€ common.scss   # å…¬å…±æ ·å¼å˜é‡
â”œâ”€â”€ types/            # TypeScript ç±»å‹
â”‚   â””â”€â”€ index.d.ts    # ç±»å‹å®šä¹‰
â””â”€â”€ utils/            # å·¥å…·å‡½æ•°
    â”œâ”€â”€ request.ts        # ç½‘ç»œè¯·æ±‚å°è£…
    â”œâ”€â”€ seckill-helper.ts # ç§’æ€è½®è¯¢å·¥å…·
    â””â”€â”€ countdown.ts      # å€’è®¡æ—¶å·¥å…·
```

## å¿«é€Ÿå¼€å§‹

### å®‰è£…ä¾èµ–

```bash
npm install
```

### å¼€å‘æ¨¡å¼

```bash
# å¾®ä¿¡å°ç¨‹åº
npm run dev:mp-weixin

# H5
npm run dev:h5
```

### ç”Ÿäº§æ„å»º

```bash
# å¾®ä¿¡å°ç¨‹åº
npm run build:mp-weixin

# H5
npm run build:h5
```

## API æ¥å£

åŸºç¡€ URL: `http://localhost:8080` (å¼€å‘ç¯å¢ƒ)

### æ ¸å¿ƒæ¥å£

#### ç”¨æˆ·æ¨¡å—
- `POST /api/v1/user/login` - å¾®ä¿¡ç™»å½•
- `GET /api/v1/user/profile` - è·å–ç”¨æˆ·ä¿¡æ¯
- `GET /api/v1/user/addresses` - è·å–åœ°å€åˆ—è¡¨

#### å•†å“æ¨¡å—
- `GET /api/v1/product/flash-list` - è·å–ç§’æ€å•†å“
- `GET /api/v1/product/detail/:skuId` - è·å–å•†å“è¯¦æƒ…
- `GET /api/v1/product/search` - æœç´¢å•†å“

#### äº¤æ˜“æ¨¡å—ï¼ˆç§’æ€ï¼‰
- `POST /api/v1/trade/seckill` - æ‰§è¡Œç§’æ€ä¸‹å•
- `GET /api/v1/trade/result/:queueId` - æŸ¥è¯¢ç§’æ€ç»“æœ

#### è®¢å•æ¨¡å—
- `GET /api/v1/order/list` - è·å–è®¢å•åˆ—è¡¨
- `GET /api/v1/order/:orderId` - è·å–è®¢å•è¯¦æƒ…
- `POST /api/v1/order/:orderId/cancel` - å–æ¶ˆè®¢å•

#### æ‹¼å›¢æ¨¡å—
- `POST /api/v1/group/initiate` - å‘èµ·æ‹¼å›¢
- `POST /api/v1/group/join` - å‚ä¸æ‹¼å›¢
- `GET /api/v1/group/:skuId/sessions` - è·å–æ­£åœ¨æ‹¼çš„å›¢

## ç§’æ€æµç¨‹

1. ç”¨æˆ·ç‚¹å‡»"ç§’æ€æŠ¢è´­"æŒ‰é’®
2. å‰ç«¯è°ƒç”¨ `/api/v1/trade/seckill` å‘èµ·ç§’æ€
3. åç«¯è¿”å› `queueId` å’Œæ’é˜ŸçŠ¶æ€
4. å‰ç«¯å¼€å§‹è½®è¯¢ `/api/v1/trade/result/:queueId`
5. è½®è¯¢é—´éš” 500msï¼Œæœ€å¤š 20 æ¬¡
6. è¿”å›æˆåŠŸåˆ™è·³è½¬æ”¯ä»˜ï¼Œå¤±è´¥åˆ™æç¤ºç”¨æˆ·

## æ‹¼å›¢æµç¨‹

1. ç”¨æˆ·æˆä¸ºå›¢é•¿ï¼Œé€‰æ‹©æ‹¼å›¢å•†å“ä¸‹å•
2. æ”¯ä»˜æˆåŠŸååˆ›å»ºæ‹¼å›¢ä¼šè¯
3. å…¶ä»–ç”¨æˆ·å¯ä»¥æŸ¥çœ‹å¹¶å‚ä¸æ‹¼å›¢
4. åœ¨è§„å®šæ—¶é—´å†…å‡‘é½äººæ•°åˆ™æ‹¼å›¢æˆåŠŸ
5. è¶…æ—¶æœªå‡‘é½åˆ™æ‹¼å›¢å¤±è´¥

## å¼€å‘è¯´æ˜

### ç±»å‹å®šä¹‰

æ‰€æœ‰æ¥å£ç±»å‹å®šä¹‰åœ¨ `src/types/index.d.ts`ï¼Œä½¿ç”¨æ—¶ç›´æ¥å¯¼å…¥ï¼š

```typescript
import type { User, Product, Order } from '@/types'
```

### çŠ¶æ€ç®¡ç†

ä½¿ç”¨ Pinia ç®¡ç†å…¨å±€çŠ¶æ€ï¼š

```typescript
import { useUserStore, useCartStore } from '@/stores'

const userStore = useUserStore()
const cartStore = useCartStore()
```

### ç½‘ç»œè¯·æ±‚

å·²å°è£… luch-requestï¼Œæ”¯æŒæ‹¦æˆªå™¨å’Œè‡ªåŠ¨é”™è¯¯å¤„ç†ï¼š

```typescript
import http from '@/utils/request'

const data = await http.get('/api/v1/user/profile', { userId })
```

## ç¯å¢ƒé…ç½®

### å¼€å‘ç¯å¢ƒ
- BaseURL: `http://localhost:8080`
- æ”¯æŒä»£ç†é…ç½®

### ç”Ÿäº§ç¯å¢ƒ
- BaseURL: `https://api.pinshop.com`
- éœ€é…ç½®å¾®ä¿¡å°ç¨‹åºä¸šåŠ¡åŸŸå

## æ³¨æ„äº‹é¡¹

1. **ç²¾åº¦é—®é¢˜**: åç«¯ Long ç±»å‹ ID è½¬ä¸º String ä¼ ç»™å‰ç«¯
2. **å›¾ç‰‡æ‡’åŠ è½½**: å•†å“åˆ—è¡¨ä½¿ç”¨ `<image lazy-load>` æå‡æ€§èƒ½
3. **å€’è®¡æ—¶å®ç°**: åŸºäºæ—¶é—´æˆ³å·®å€¼è®¡ç®—ï¼Œé¿å…åå°è¿è¡Œåå·®
4. **Token ç®¡ç†**: ç™»å½•åå­˜å‚¨åœ¨æœ¬åœ°ï¼Œè¯·æ±‚æ—¶è‡ªåŠ¨æ·»åŠ åˆ° Header

## License

MIT
